"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8593],{30684:(e,n,t)=>{function i(e,n){for(var t,i=0;i<n.length;i++)(t=n[i]).enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}var r=t(24433),o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return n=e,(t=[{key:"startAuction",value:function(){this.measure=r("UAM:auction")}},{key:"requestBids",value:function(e,n,t){return e.gdprIsApplicable?Promise.resolve(void 0):new Promise((function(n){var i;if(window.apstag?i=t.filter((function(e){return e.mediaTypes.banner})).map((function(e){return{sizes:e.mediaTypes.banner.sizes,slotID:e.code,slotName:e.adUnitPath}})):n(void 0),i&&i.length){var o=setTimeout((function(){n(!1)}),e.timeout),a=r("UAM:fetchBids");window.apstag.fetchBids({slots:i},(function(e){a.end(),clearTimeout(o),n(new s(e))}))}else n(void 0)}))}},{key:"endAuction",value:function(){this.measure.end()}}])&&i(n.prototype,t),e;var n,t}();function s(){this.prepareRequest=function(){window.apstag.setDisplayBids()}}e.exports=o},59206:(e,n,t)=>{function i(e,n){for(var t,i=0;i<n.length;i++)(t=n[i]).enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}var r=t(47586),o=0,s=function(){function e(n,t){(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,e),this.pbjs=n,this.pbjs.aliasBidder("freewheel-ssp","freewheel"),this.pbjs.aliasBidder("33across","33acrosshi"),this.features=t}return n=e,(t=[{key:"init",value:function(e){var n={buckets:[{precision:2,max:r.PRICING_BREAKPOINT,increment:.05},{precision:2,max:r.PRICING_MAX_BUCKET,increment:1}]},t={bidderSequence:"fixed",enableSendAllBids:!1,ix:{firstPartyData:Object.assign({},e.keyValues)},priceGranularity:n,userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}},syncDelay:5e3},rubicon:{singleRequest:!0},useBidCache:!0,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"}};if(t.consentManagement=e.gdprIsApplicable?{gdpr:{cmpApi:"iab",timeout:1e4,defaultGdprScope:!0,allowAuctionWithoutConsent:!1}}:{usp:{cmpApi:"iab",timeout:1e4}},this.pbjs.installedModules&&this.pbjs.installedModules.includes("verizonMediaIdSystem")&&e.userSync&&e.userSync.userIds&&window.localStorage){var i=e.userSync.userIds.findIndex((function(e){return"verizonMediaId"===e.name}));if(0<=i){var o,s=window.localStorage.getItem("emailHashes");if(null!==s){var a;try{a=JSON.parse(s)}catch(e){}a&&a.length&&(o=a.filter((function(e){return"sha256"===e.alg})).map((function(e){return e.digest}))[0])}o?e.userSync.userIds[i].params.he=o:e.userSync.userIds.splice(i,1)}e.userSync.userIds.length&&(t.userSync.userIds=e.userSync.userIds)}this.pbjs.setConfig(t),e.pbjsConfig&&this.pbjs.setConfig(e.pbjsConfig);var u=function(){var e;if(window.crypto&&window.crypto.getRandomValues){var n=new Uint32Array(1);window.crypto.getRandomValues(n),e=n[0]/4294967296}else e=Math.random();return Math.floor(e*Math.pow(10,16))};if(this.features.isEnabled("use-hummingbird")&&e.pbjsConfig&&e.hummingbirdUrl){if(!window.hummingbirdCorrelator){var c=u();if(c===u())return;window.hummingbirdCorrelator=c}var d=this.features.isEnabled("verbose-hummingbird"),f=e.pbjsConfig.regionCode,l=!("US"!==e.pbjsConfig.countryCode||f&&"CA"!==f||this.features.isEnabled("disable-ccpa"));this.pbjs.enableAnalytics({provider:"maven",options:{contentItemId:"tm-"+e.pbjsConfig.contentItemId,countryCode:e.pbjsConfig.countryCode,ccpaApplies:l,mavenChannel:e.pbjsConfig.mavenChannel,pod:e.keyValues.pod,productionDomain:e.pbjsConfig.productionDomain,screenSize:e.screenSize,url:e.hummingbirdUrl,verbose:d,zoneMap:e.pbjsConfig.zoneMap}})}!this.features.isEnabled("disable-li")&&e.pbjsConfig&&this.pbjs.enableAnalytics({provider:"mavenDistributionAnalyticsAdapter",options:{zoneMap:e.pbjsConfig.zoneMap}});var p=e.pbjsConfig&&e.pbjsConfig.userIds&&e.pbjsConfig.userIds.find((function(e){return"identityLink"===e.name}));p&&this.pbjs.enableAnalytics({provider:"atsAnalytics",options:{pid:p.params.pid,host:"https://analytics.openlog.in"}})}},{key:"startAuction",value:function(e){var n=this;this._initialized||(this.init(e),this._initialized=!0),this.bidConfigByAdUnit={},Object.keys(e.unitVendorConfig||{}).forEach((function(t){n.bidConfigByAdUnit[t]=e.unitVendorConfig[t]})),this.pbjs.bidderSettings={trustx:{bidCpmAdjustment:function(e,t){var i=n.bidConfigByAdUnit[t.adUnitCode];return i&&i.trustx&&i.trustx.bidReductionPercent&&(e*=1-i.trustx.bidReductionPercent/100),e}}},e.gdprIsApplicable&&this.pbjs.setConfig({userSync:{syncEnabled:!1}})}},{key:"requestBids",value:function(e,n,t){var i,r=this;return n||(i=++o),t.forEach((function(n){for(var t in n.bids.forEach((function(n){Object.keys(e.keyValues).forEach((function(t){var i=e.keyValues[t],r=Array.isArray(i);if(r||(i=""+i),"rubicon"===n.bidder)(n.params.inventory||(n.params.inventory={}))[t]=r?i:[i];else if("pubmatic"!==n.bidder||r)"appnexus"===n.bidder&&(n.params.keywords||(n.params.keywords={}),"pod"===t&&(i=+i),n.params.keywords[t]=i);else{n.params.dctr?n.params.dctr+="|":n.params.dctr="";var o=function(e){return e.replace(/[=|]/g,"")};t=o(t),i=o(i),n.params.dctr+=t+"="+i}}))})),n.mediaTypes){var i=n.mediaTypes[t];"video"==t&&"outstream"===i.context&&(i.renderer={url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",render:function(e){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}})}})),new Promise((function(s,u){var c=function(t){return n||i===o?void s(new a(t,e,r.pbjs)):void u(new Error("auction interrupted"))},d=[];window.IxLibraryPromise&&d.push(window.IxLibraryPromise),window.SublimeRendererPromise&&d.push(window.SublimeRendererPromise),window.IdentityLinkPromise&&d.push(window.IdentityLinkPromise),Promise.all(d).then((function(){window.SublimeRendererPromise&&!window.sublime&&t.forEach((function(e){e.bids=e.bids.filter((function(e){return"sublime"!==e.bidder}))}));for(var n=e.timeout,i=0;i<t.length;i++)for(var o in t[i].mediaTypes){var s=t[i].mediaTypes[o];"video"==o&&"instream"===s.context&&e.videoTimeout&&(n=e.videoTimeout)}window.phxTrackedFeatures["min-height-header-ad"]&&t.forEach((function(n){e.slots.forEach((function(e){var t,i;e.id===n.code&&"header"===e.model.zone&&(n.mediaTypes.banner.sizes=(t=n.mediaTypes.banner.sizes,i=t.sort((function(e,n){return e[1]-n[1]}))[0][1],t.filter((function(e){return e[1]===i}))))}))})),r.pbjs.requestBids({timeout:n,adUnits:t,bidsBackHandler:c})}))}))}},{key:"endAuction",value:function(){}}])&&i(n.prototype,t),e;var n,t}();function a(e,n,t){var i=this;this._pbjs=t,this.prepareRequest=function(e){i._pbjs.setTargetingForGPTAsync(e.map((function(e){return e.getSlotElementId()}))),e.forEach((function(e){var n=e.getTargeting("hb_pb");n&&n.length&&e.setTargeting("hb_pbd",r.getCpmDollarBucket(parseFloat(n[0])).toString());var t=e.getTargeting("hb_deal");t&&t.length&&e.setTargeting("deal","1");var o=e.getTargeting("hb_adid"),s=i._highestBid(e.getSlotElementId());s&&o&&o.length&&o[0]===s.adId&&s.appnexus&&s.appnexus.buyerMemberId&&e.setTargeting("apnmid",s.appnexus.buyerMemberId)}))},this.getMaxBidForAdUnit=function(e){var n=i._highestBid(e),t=0;return n&&n.cpm&&(t=n.cpm),t},this._highestBid=function(e){var n=i._pbjs.getHighestCpmBids(e);if(n&&n.length)return n[0]}}e.exports=s},20566:(e,n,t)=>{function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=t(24433),a=new Set(["appnexus","ix","pubmatic","rubicon","spotx","teads"]),u=0,c=0;function d(){this.getSlotModelPropertiesForAdUnit=function(){return{}},this.getMaxBidForAdUnit=function(){return 0},this.prepareRequest=function(){}}e.exports=function(e,n,t){var i=this;function o(n,t,i){var r,o,d,h=this,m=new Promise((function(e,n){r=e,o=n}));return i?p[i]=m:f=m,d=window.phxTrackedFeatures["bid-scroll-"+e.toLowerCase()]?new Promise((function(e){if(0<window.scrollY)e();else{var n=function(){document.removeEventListener("scroll",n),e()};document.addEventListener("scroll",n)}})):Promise.resolve(),Promise.all([window.GdprStatus.countryCodeSafe(),window.GdprStatus.regionCodeSafe(),window.GdprStatus.isDemonetizedSafe(),d]).then((function(d){var f=d[0],p=d[1];if(d[2])return!0!==t&&h._auctionConfigPromiseResolve(!1),void r([]);!0!==t&&(l=n,h._auctionConfigPromiseResolve(!0)),n.screenSize=e,n.keyValues=h.keyValues;var m=location.pathname.split("/");m[0]=location.hostname;var g="",b=1;m.forEach((function(e){""!==e&&(g+=(""===g?"":"/")+e,n.keyValues["au"+b++]=g)})),n.keyValues.pod=""+c;var v=s("prebid:auction:"+ ++u);n.pbjsConfig||(n.pbjsConfig={}),n.pbjsConfig.countryCode=f,n.pbjsConfig.regionCode=p;var w={};n.slots&&n.slots.map((function(e){w[e.id]={zone:e.model&&e.model.zone,index:e.model&&e.model.index}})),window.phxPageTarget&&window.phxPageTarget.config.dynamicSlots&&window.phxPageTarget.config.dynamicSlots.map((function(e){w[e.id]={zone:e.model&&e.model.zone,index:e.model&&e.model.index}})),n.pbjsConfig.zoneMap=w,h._services.forEach((function(e){return e.startAuction(n,i)}));var y=n.units[e]||[];n.gdprIsApplicable&&(y=y.filter((function(e){return e.bids=e.bids.filter((function(e){return a.has(e.bidder)})),0<e.bids.length}))),y.forEach((function(e){e.bids=e.bids.filter((function(e){var n=!0;if(e.geographicRestrictions){var t=e.geographicRestrictions.countries||[];"exclude"===e.geographicRestrictions.restrictionType?n=!t.includes(f):"restrictTo"===e.geographicRestrictions.restrictionType&&(n=t.includes(f)),delete e.geographicRestrictions}return n}))}));var C=h._services.map((function(e){return e.requestBids(n,i,y)}));Promise.all(C).then((function(e){v.end(),h._services.forEach((function(t){return t.endAuction(n,i,y,e)})),r(e)})).catch((function(e){return o(e)}))}))}if(t)return this.getLatestResult=function(){return Promise.resolve(new d)},this.getResultById=function(){return Promise.resolve(new d)},this.startAuction=function(){},this.rerunAuction=function(){},void(this.addService=function(){});this._services=[];var f,l,p={},h=new Promise((function(e){i._auctionConfigPromiseResolve=e}));0===c&&(c=function(){function e(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}var n,t="pageViews",i=window.localStorage;if(!i)return 0;try{n=JSON.parse(i.getItem(t))}catch(e){}if(n&&n.created){var r=e(new Date(n.created)),o=e(new Date);r.getTime()===o.getTime()?++n.value:(i.removeItem(t),n=void 0)}return n||(n={created:new Date,value:0}),i.setItem(t,JSON.stringify(n)),n.value}());var m=function(e){return{prepareRequest:function(n){e.forEach((function(e){e&&e.prepareRequest&&e.prepareRequest(n)}))},getSlotModelPropertiesForAdUnit:function(n){var t=Object.assign({},i.keyValues);return e.forEach((function(e){e&&e.getSlotModelPropertiesForAdUnit&&Object.assign(t,e.getSlotModelPropertiesForAdUnit(n))})),t},getMaxBidForAdUnit:function(n){var t=0;return e.forEach((function(e){e&&e.getMaxBidForAdUnit&&(t=Math.max(t,e.getMaxBidForAdUnit(n)))})),t}}};this.keyValues={},this.getLatestResult=function(){return f?f.then(m):Promise.resolve(new d)},this.getResultById=function(e){return p.hasOwnProperty(e)?p[e].then(m):Promise.reject(new Error("Unknown auction result requested: "+e))},this.startAuction=function(e){var n=this,t=arguments,i=function(){return o.apply(n,t)},r=window.GdprStatus;return e.gdprIsApplicable&&void 0===e.gdprIsConsentGiven?r.waitForConsentValue().then((function(){r.isConsentGivenForPurposes(r.PURPOSE_IDS.advertising).then((function(n){e.gdprIsConsentGiven=n,i()}))})):i()},this.dynamicAuction=function(n,t){var i=this;return new Promise((function(o,s){h.then((function(a){a||s();var u=r(r({},l),{},{slots:n.slots,unitVendorConfig:n.unitVendorConfig,units:{}});u.units[e]=n.units[e],i.startAuction(u,!0,t).then((function(){o()}))}))}))},this.rerunAuction=function(n,t,i){if(!l)return!1;var r,o=!1;return n?((r={siteProductionDomain:l.siteProductionDomain,timeout:t||l.timeout,isRefresh:!0,slots:l.slots.filter((function(e){return e.id===n})),unitVendorConfig:l.unitVendorConfig,units:{}}).units[e]=l.units[e].filter((function(e){return e.code===n})),o=!0):r=l,this.startAuction(r,o,i),!0},this.addService=function(e){this._services.push(e)},this.setKeyValue=function(e,n){this.keyValues[e]=n}}},89225:(e,n,t)=>{var i=t(87796),r=t(20566),o=t(59206),s=t(30684),a=t(24433)("adScripts:beta1");window.phxConfigQueue.push((function(){var e=this,n=window.pbjs;n.que.push((function(){var t=new r(e.breakpoint.get(),e.features,e.user.hasPremium());t.addService(new o(n,e.features)),t.addService(new s),i("phxAdAuctionQueue",t)}))})),a.end()},47586:e=>{e.exports={PRICING_BREAKPOINT:20,PRICING_MAX_BUCKET:50,getCpmDollarBucket:function(e){return Math.min(Math.floor(e),50)}}},87796:e=>{e.exports=function(e,n){function t(e){n.then?n.then((function(t){n=t,e.call(n)})):e.call(n)}var i=window[e];if(window[e]={push:t},void 0!==i)for(var r=0;r<i.length;r++)t(i[r])}},86483:e=>{var n,t=function(){};try{n=window}catch(e){n={}}e.exports=n.performance&&n.performance.mark?n.performance:{getEntriesByName:t,mark:t,measure:t}},24433:(e,n,t)=>{var i=t(86483),r=0;function o(){var e="phxMark:"+r++;return i.mark(e),e}e.exports=function(e){var n=o();return{end:function(){var t=o();i.measure(e,n,t);var r=i.getEntriesByName(e);if(r&&r.length)return r[r.length-1].duration}}}}},e=>{e(e.s=89225)}]);
//# sourceMappingURL=adAuctionPrebidJSAmazonUAM.min.js.map