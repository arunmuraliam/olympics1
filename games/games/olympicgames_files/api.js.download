;(function(win,doc){var ccao=win["cca"];var ccaoSettings=null;win.carbonReady=win.carbonReady||[];ccao.privacy=ccao.privacy||{que:[]};var getSyncUserUrl=function(){return win._ccLauncherSettings.ingestion+"/event/record/user-sync?";};var buildEventMessage=function(nameValuePairs){var data=[];data.push(["parentId",encodeURIComponent(ccao.settings.site.parentId)]);data.push(["scriptId",encodeURIComponent(ccao.settings.site.scriptId)]);data.push(["triggerId","6832865d-3a8b-4bc0-80f8-a9b174e8afe3"]);data.push(["triggerLabel","client-event"]);data.push(["eventTarget",'']);var customAttributes=[];if(nameValuePairs){for(var i in Object.keys(nameValuePairs)){customAttributes.push([i+'='+nameValuePairs[i]]);}}
data.push(["customAttributes",customAttributes.join(";")]);return data;};function firePixel(endpoint){switch(ccao.privacy.law.toLowerCase()){case "gdpr":if(ccao.privacy.gdpr.Consent){var img=new Image(1,1);img.src=endpoint;}
break;case "ccpa":if(ccao.privacy.ccpa.Consent){var img=new Image(1,1);img.src=endpoint;}
break;case "na":var img=new Image(1,1);img.src=endpoint;break;case "optout":case "unknown":default:break;}}
function pixelSync(endpoint){return function(){ccao.privacy=ccao.privacy||{};ccao.privacy.que=ccao.privacy.que||[];ccao.privacy.que.push(function(){firePixel(endpoint);});};}
function getSyncUrlParams(partnerId,useSiteId){var partnerSrc=ccaoSettings.site.parentId;if(useSiteId!==undefined&&useSiteId===true)
partnerSrc=ccaoSettings.site.id;return 'src='+partnerSrc+'&ccsid='+ccaoSettings.session.id+'&ccuid='+ccaoSettings.user.id+'&ccpt=-1'+'&puid='+partnerId;}
function api(id){var userId=id;this.syncUserIdentity=function(clientUserId,useSiteId){if(ccaoSettings!==null&&clientUserId!==undefined)
pixelSync(getSyncUserUrl()+getSyncUrlParams(clientUserId,useSiteId))();};this.getUserId=function(){return userId;};this.recordEvent=function(eventName){if(eventName&&eventName.length>0){var data=buildEventMessage();ccao.sendMessage('custom-ce-'+eventName,data,true);}};this.refreshCarbon=function(){ccao.refreshGPTTargeting();ccao.refresh();};this.ready=true;};var apiReady=function(){if(win.carbonReady!==null){var readyLen=win.carbonReady.length;for(var i=0;i<readyLen;i++){win.carbonReady[i]();}}
win.carbonReady={"push":function(pushFunc){if(typeof(pushFunc)==='function')pushFunc();}};};ccao.getSettings(function(settings){ccaoSettings=settings;var localApi=new api(settings.user.id);ccao.api=Object.assign(ccao.api,localApi);win.carbonApi=ccao.api;win.carbon=win.carbonApi;apiReady();ccao.api.dispatchEvent('apiReady');});})(window,document);