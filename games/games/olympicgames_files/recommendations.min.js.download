"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[18],{63950:e=>{e.exports={breakpoints:{A:0,B:675,C:1240,D:1680},breakpointHeights:{D:1050}}},52784:(e,t,n)=>{var o=n(24433);e.exports={getDependencyClass:function(e){if(!e)throw new Error("dependencyName required");var t=o("dependency:"+e);return window.customElements.whenDefined(e).then((function(){return t.end(),window.customElements.get(e)}))},getFirstDependencyElement:function(e,t){if(!e)throw new Error("dependencyName required");return t||(t=document),window.customElements.whenDefined(e).then((function(){var n=t.querySelector(e);if(!n)throw new Error(e+" element cannot be found");return n}))}}},86483:e=>{var t,n=function(){};try{t=window}catch(e){t={}}e.exports=t.performance&&t.performance.mark?t.performance:{getEntriesByName:n,mark:n,measure:n}},24433:(e,t,n)=>{var o=n(86483),r=0;function i(){var e="phxMark:"+r++;return o.mark(e),e}e.exports=function(e){var t=i();return{end:function(){var n=i();o.measure(e,t,n);var r=o.getEntriesByName(e);if(r&&r.length)return r[r.length-1].duration}}}},9736:(e,t,n)=>{function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n,o=0;o<t.length;o++)(n=t[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var c=n(63950),a=c.breakpoints,d=c.breakpointHeights;function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.head;return new Promise((function(o,r){var i=document.createElement("script");t&&(i.id=t),i.onload=function(){o(i)},i.onerror=function(e){r(e)},i.type="text/javascript",i.src=e,n.appendChild(i)}))}var m={};function l(e,t,n){var o=t||e;return m[o]||(m[o]=u(e,t,n))}function f(){var e,t=window.innerWidth,n=window.innerHeight;for(var o in a)t>=a[o]&&(!d[o]||n>=d[o])&&(e=o);return e}var h,p,w,g=function(){function e(){r(this,e),this.observedBreakpoint=void 0,this.subscribers=[],this._observe()}return s(e,[{key:"_observe",value:function(){var e=this;this.observedBreakpoint=f(),window.addEventListener("resize",(function(){var t=f();t!==e.observedBreakpoint&&(e.observedBreakpoint=t,e.subscribers.forEach((function(e){e.onBreakpointChange(t)})))}))}},{key:"subscribe",value:function(e){if(!e.onBreakpointChange)throw new Error("onBreakpointChange method required");this.unsubscribe(e),this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}}]),e}();function v(){return"complete"===document.readyState||"interactive"===document.readyState}var b,y,T,k="190px 0px",P={},R=function(){function e(t,n){r(this,e),this.callback=t,this.timerId=null,this.restart(n)}return s(e,[{key:"restart",value:function(e){this.remaining=e,this.resume()}},{key:"resume",value:function(){this.start=new Date,clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}},{key:"pause",value:function(){clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"cancel",value:function(){clearTimeout(this.timerId),this.cancelled=!0}}]),e}();e.exports={addScriptResource:u,addScriptResourceOnce:l,debounce:function(e,t,n){function r(){return(new Date).getTime()}function i(){var n=t-(r()-l);if(0>=n||n>t){u&&window.clearTimeout(u);var o=p;u=h=p=void 0,o&&(v=r(),m=e.apply(f,a),!h&&!u&&(a=f=null))}else h=window.setTimeout(i,n)}function s(){h&&window.clearTimeout(h),u=h=p=void 0,(y||b!==t)&&(v=r(),m=e.apply(f,a),!h&&!u&&(a=f=null))}function c(){var n,o,c;return a=arguments,l=r(),f=this,p=y&&(h||!d),!1===b?n=d&&!h:(!u&&!d&&(v=l),(c=0>=(o=b-(l-v))||o>b)?(u&&(u=window.clearTimeout(u)),v=l,m=e.apply(f,a)):!u&&(u=window.setTimeout(s,o))),c&&h?h=window.clearTimeout(h):!h&&t!==b&&(h=window.setTimeout(i,t)),n&&(c=!0,m=e.apply(f,a)),!c||h||u||(a=f=null),m}var a,d,u,m,l,f,h,p,w,g,v=0,b=!1,y=!0;if(c.cancel=function(){h&&window.clearTimeout(h),u&&window.clearTimeout(u),u=h=p=void 0},"function"!=typeof e)throw new TypeError("this is not a function!");return t=0>t?0:+t||0,!0===n?(d=!0,y=!1):(g=o(w=n),!!w&&("object"===g||"function"===g)&&(d=n.leading,b="maxWait"in n&&Math.max(+n.maxWait||0,t),y="trailing"in n?n.trailing:y)),c},getCurrentBreakpoint:f,isExternalLink:function(e,t){if(!e)return!1;t||(t=function(){if(!y){var e=document.querySelector("link[rel='canonical']"),t=document.createElement("a");t.href=e.href,y=t.hostname}return y}());var n=e.match(/^https?:\/\/([^/]+)\/?/);return!!n&&n[1]!==t},isLiftIgniterSlice:function(e,t){return(0|e/100)%100<t},loadMetabetScriptOnce:function(e){l("".concat("https://go.metabet.io/js/global.js?siteID=").concat(e),"metabet-script").then((function(){-1===(document.head||document.getElementsByTagName("head")[0]).innerHTML.indexOf("metabet.io/css/main.css")&&"function"==typeof window.mb_DOMContentLoaded&&window.mb_DOMContentLoaded()}))},observeBreakpointChanges:function(e){return h||(h=new g),h.subscribe(e),h},observeFirstIntersection:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:k,n=P[t]||(P[t]=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(t.unobserve(e.target),e.target.onFirstIntersection&&e.target.onFirstIntersection())}))}),{rootMargin:t}));return n.observe(e),n},observeVisibilityChanges:function(e){return b||(b=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&.5<=e.intersectionRatio?e.target.onChangeToVisible&&e.target.onChangeToVisible():e.target.onChangeToNotVisible&&e.target.onChangeToNotVisible()}))}),{threshold:.5})),b.observe(e),b},parseHostName:function(e){return e.replace(/^https?:\/\//,"").replace(/[:\/].*/,"").toLowerCase().replace(/^www\./,"").replace(/^m\./,"").replace(/\.blogspot(\.com?)?\.[a-z]{2,3}$/,".blogspot.com").replace(/^.*\.(gamepedia|wikia)(\.com?)?\.[a-z]{2,3}$/,"$1.com").split(".").slice(-3).join(".")},supportPassiveEventListeners:function(){if(void 0===T){T=!1;try{var e=Object.defineProperty({},"passive",{get:function(){T=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}}return T},throttle:function(e,t){var n,o,r,i,s=0,c=function(){s=new Date,r=null,i=e.apply(n,o)};return function(){var a=new Date,d=t-(a-s);return n=this,o=arguments,0>=d?(r&&clearTimeout(r),s=a,i=e.apply(n,o)):!r&&(r=setTimeout(c,d)),i}},Timer:R,userHasPremium:function(){return new Promise((function(e,t){window.phxConfigQueue||t("config object is necessary to check premium"),window.phxConfigQueue.push((function(){e(this.user.hasPremium())}))}))},waitForElement:function(e,t,n){if(!e)throw new Error("rootElement required");var o;return n&&n.untilDomReady&&(o=function(e){v()&&e()}),function(e,t,n,o){var r=e.querySelector(t);return r?Promise.resolve(r):new Promise((function(r,i){var s=new MutationObserver((function(){var n=e.querySelector(t);return n?(s.disconnect(),void r(n)):void(o&&o((function(){return s.disconnect(),void i(new Error("element not found"))})))}));s.observe(e,n)}))}(e,t,{childList:!0,subtree:!0},o)},whenDomContentLoaded:function(){return p||(p=v()?Promise.resolve():new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),p},whenPageLoaded:function(){return w||(w="complete"===document.readyState?Promise.resolve():new Promise((function(e){window.addEventListener("load",e)}))),w}}},4476:(e,t,n)=>{function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?r(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n,o=0;o<t.length;o++)(n=t[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(52784).getDependencyClass,f=n(24433)("webcomponents:recommendations"),h=n(9736).isLiftIgniterSlice;l("phoenix-page").then((function(e){var t=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=l.call(this),window.recommendedContentRequest=window.recommendedContentRequest||{widgetPromises:[],userHashPromises:[]},window.recommendedContentRequest.widgetPromises.push(new Promise((function(t){e.contentPromiseResolve=t}))),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e);var n,o,r,s,l=(r=t,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(s){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});return n=t,(o=[{key:"cardRenderedPromises",get:function(){return this._promises},set:function(e){e&&(!this._promises&&(this._promises=[]),this._promises.push(e))}},{key:"data",get:function(){return this._data},set:function(e){void 0===e&&(e=[]),this._data=e}},{key:"isInContentRecommendation",get:function(){return this.config.isInContentRecommendation}},{key:"loaded",get:function(){return this._isLoaded},set:function(e){e&&(this._isLoaded=e)}},{key:"widgetName",get:function(){return this.config.widgetName}},{key:"useBaseCardOnConnected",get:function(){return this._useBaseCardOnConnected},set:function(e){e&&(this._useBaseCardOnConnected=e)}},{key:"recordedTimesForFetching",get:function(){return window._recommendedContentRecordedTimesForFetching},set:function(e){window._recommendedContentRecordedTimesForFetching||(window._recommendedContentRecordedTimesForFetching={}),e&&(window._recommendedContentRecordedTimesForFetching=i(i({},window._recommendedContentRecordedTimesForFetching),e))}},{key:"recordedTimes",get:function(){return this._recordedTimes},set:function(e){this._recordedTimes||(this._recordedTimes={}),e&&(this._recordedTimes=i(i({},this._recordedTimes),e))}},{key:"percentageForPersonalizedRecommendation",get:function(){return parseInt(this.getAttr("percentage_for_personalized_recommendation",{required:!0}))}},{key:"connectedCallback",value:function(){var e=this;if(a(m(t.prototype),"connectedCallback",this).call(this),navigator.connection&&navigator.connection.effectiveType&&("slow-2g"===navigator.connection.effectiveType||"2g"===navigator.connection.effectiveType||"3g"===navigator.connection.effectiveType))this.useBaseCardOnConnected=!0,this.showBaseOrHide(),this.trackRecommendations("base","user-slow-connection");else if(navigator.connection&&navigator.connection.saveData)this.useBaseCardOnConnected=!0,this.showBaseOrHide(),this.trackRecommendations("base","user-saving-data");else{var n=this.makeQueryablePromise(window.GdprStatus.getMavenUid());Promise.all([n,window.liftIgniterPromise]).then((function(t){var n=new Promise((function(e,t){setTimeout((function(){t("li beacon failed to load in 5 seconds.")}),5e3)}));Promise.race([window.liftIgniterLoadPromise,n]).then((function(){e.mavenUserId=t[0],window.$p("userHash",(function(t){e.loaded||(e.loaded=!0,h(t,e.percentageForPersonalizedRecommendation)?(e.userHashPromiseResolve&&e.userHashPromiseResolve(!0),Promise.all(window.recommendedContentRequest.userHashPromises).then((function(){e.requestRecommendedItems()})),!window.recommendedContentRequest.initFetch&&(window.recommendedContentRequest.initFetch=Promise.all(window.recommendedContentRequest.widgetPromises).then((function(){delete window.recommendedContentRequest,e.recordedTimesForFetching={liModelFetchStartTime:performance.now()},window.$p("fetch")})))):(e.showBaseOrHide(),e.trackRecommendations("base","base-user-hash"),e.userHashPromiseResolve&&e.userHashPromiseResolve(!0),e.contentPromiseResolve&&e.contentPromiseResolve(!0)))}))})).catch((function(t){e.loaded||(console.error(t),e.loaded=!0,e.showBaseOrHide(),e.trackRecommendations("base","li-load-promise-erred"))}))})).catch((function(t){var o=n.isRejected()?"maven-uid-promise-erred":"li-promise-erred";e.showBaseOrHide(),e.trackRecommendations("base",o),console.error(t&&t.message?t.message:t)}))}}},{key:"requestRecommendedItems",value:function(){var e,t=this,n="https://"+this.config.siteDomain,o=this.getAttr("key_values_for_personalized_recommendation",{required:!1});try{e=JSON.parse(o)}catch(t){e={}}window.$p("setRequestFields",["tempestId","channelKey"]),window.$p("register",{max:this.config.size,widget:this.widgetName,opts:i({f:["tempestId","channelKey"],mf:["tempestId","channelKey"],excludeItems:window.nonPersonalizedItems?window.nonPersonalizedItems.map((function(e){return e.startsWith("/")?"".concat(n).concat(e):e})):[],objectType:"Article"},e),callback:function(e){t.recordedTimesForFetching={liModelFetchEndTime:performance.now()};var n=e&&e.items;n&&n.length>=t.config.size?(t.data=n.slice(0,t.config.size),t.notify("phoenix:recommendations:ready",t.widgetName),t.cardRenderedPromises&&t.cardRenderedPromises.length===t.config.size?Promise.all(t.cardRenderedPromises).then((function(e){t.recordedTimes={allCardsRenderEndTime:performance.now()},-1<e.indexOf(!0)?t.trackRecommendations("LI"):t.trackRecommendations("base","all-card-render-promises-returned-false")})).catch((function(e){t.showBaseOrHide(),t.trackRecommendations("base","all-card-rendered-promise-error:"+e.message),console.error(e&&e.message?e.message:e)})):(t.showBaseOrHide(),t.trackRecommendations("base","num-cards-to-be-rendered-less-than-config-size"))):(t.showBaseOrHide(),t.trackRecommendations("base","num-li-model-items-less-than-config-size"))},onTimeout:function(){t.showBaseOrHide(),t.trackRecommendations("base","li-fetch-timeout")}}),this.contentPromiseResolve&&this.contentPromiseResolve(!0)}},{key:"notify",value:function(e,t){var n={bubbles:!0};t&&(n.detail={key:e,value:t},this.emitEvent(e,n))}},{key:"trackRecommendations",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;Promise.all([window.googleAnalyticsPromise,window.googleAnalyticsLibPromise]).then((function(){window.googleAnalytics&&(window.$p?window.$p("userHash",(function(e){h(e,t.percentageForPersonalizedRecommendation)?window.googleAnalytics.set("recommendationAlgorithm","ML"):window.googleAnalytics.set("recommendationAlgorithm","base")})):window.googleAnalytics.set("recommendationAlgorithm","base"))}));var o={fallbackToBase:n||"null",liModelFetchStartTime:this.recordedTimesForFetching&&this.recordedTimesForFetching.liModelFetchStartTime?Math.trunc(this.recordedTimesForFetching.liModelFetchStartTime):void 0,liModelFetchEndTime:this.recordedTimesForFetching&&this.recordedTimesForFetching.liModelFetchEndTime?Math.trunc(this.recordedTimesForFetching.liModelFetchEndTime):void 0,allCardsRenderTimeTaken:this.recordedTimes&&this.recordedTimes.allCardsRenderEndTime&&this.recordedTimesForFetching.liModelFetchEndTime?Math.trunc(this.recordedTimes.allCardsRenderEndTime-this.recordedTimesForFetching.liModelFetchEndTime):void 0,cardRenderTimes:this.recordedTimes&&this.recordedTimes.cardRenderTimes?Object.values(this.recordedTimes.cardRenderTimes):void 0};o=JSON.parse(JSON.stringify(o)),window.liftIgniterPromise.then((function(){window.$p("track",{elements:t.querySelectorAll("phoenix-super-link"),name:t.widgetName,source:e,noTag:!0,opts:o})}))}},{key:"showBaseOrHide",value:function(){this.isInContentRecommendation?this.hide():this.notify("phoenix:recommendations:use_base",this.widgetName)}},{key:"hide",value:function(){var e=this.closest(".m-in-content-recommendation");e&&(e.hidden=!0)}}])&&c(n.prototype,o),t}(e.PhoenixElement);window.customElements.define("phoenix-recommendations",t),f.end()}))}},e=>{e(e.s=4476)}]);
//# sourceMappingURL=recommendations.min.js.map