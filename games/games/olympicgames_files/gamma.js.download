"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1124],{42392:(e,n,t)=>{var r=t(24433),i=t(41762),o="is-empty",a="is-loaded",s="fixed_bottom",u="adhesion";function c(e,n,t,r){function c(){return n===e.pageId}function d(o,a,d){if(e.forceAllSlotsEmpty)return v("all slots on page",n,"forced empty by configuration"),function(n){var t=n.map((function(n){var t=e.document.getElementById(n.id);return t?Promise.resolve({slotId:n.id,element:t,filled:!1,sizeCode:null}).then((function(e){return l(e),e})):Promise.reject(new Error("missing container element for ad "+n.id))}));return Promise.all(t)}(o);var f=window.GdprStatus,m=[w,e.clientPageModelPromise,e.breakpointPromise,f.isApplicable(),f.countryCodeSafe(),r];return Promise.all(m).then((function(r){if(!c())return v("ignoring prereqs for defunct page",n),void Promise.reject("Page not current");var f=r[0],m=r[1],g=r[2],p=r[3];v("requesting for page",n,"slots with screenSize",g);var w=i.makePageModel(t.global.baseModel,a&&a.keyValues||{},p,m),k=o.filter((function(e){return!e.screenSizes||-1!==e.screenSizes.indexOf(g)}));e.hasAdhesionAndFixedBottomZone&&(k=function(n,t){if(b){var r=n.filter((function(e){var n=e.model.zone;return n!==u&&n!==s||(b[n]=e,t&&(y[n]=t.getMaxBidForAdUnit(e.id)),!1)}));if(s in b&&u in b){var i=function(){S++;var e=h.config.global.config.expectedRefreshCount;return null==e&&(e=6),s in y?0===y.fixed_bottom?s:s in y&&u in y?y.adhesion<=y.fixed_bottom*Math.max(e-(S-1),1)?s:u:s:u}();if(r.push(b[i]),delete b[i],i===u){if(P=!0,window.dispatchEvent(new window.CustomEvent("phoenix:advertising:adhesionWon")),b.fixed_bottom){var o=e.document.getElementById(b.fixed_bottom.id);if(o){var a=o.closest("phoenix-ad");a&&a.parentElement.removeChild(a)}}b=void 0}}return r}return P&&(n=n.filter((function(e){return e.model.zone!==s}))),n}(k,d)),(k=k.map((function(n){var r={};d&&(r=d.getSlotModelPropertiesForAdUnit(n.id));var i,o,a,s=e.document.getElementById(n.id);return s?{id:n.id,adUnitPath:n.adUnitPath,config:n.config,element:s,model:Object.assign({},n.model,(i=t.global.baseModel,o=n.model,a=Math.min(o.index,4),{zoneIndex:o.zone+"_"+a,siteZoneIndex:i.hostname+"_"+o.zone+"_"+a}),r)}:(console.warn("missing container element for ad",n.id),null)})).filter((function(e){return!!e}))).forEach((function(n){var t;if(!n.model.isOutstream){var r=n.element.parentElement;if(r){var i='[data-ad-group="'+r.parentElement.getAttribute("data-ad-group")+'"]',o=e.document.querySelectorAll(i+".not-size-"+g),a={};for(t=0;t<o.length;t++){var s=o[t];["A","B","C","D"].forEach((function(e){s.classList.contains("not-size-"+e)||(a[e]=!0)})),s.parentElement.removeChild(s)}var u=e.document.querySelectorAll(i);for(t=0;t<u.length;t++)Object.keys(a).forEach((function(e){var n="not-size-"+e;u[t].classList.remove(n),r.classList.remove(n)}))}}}));var A=new Promise((function(e){if("visible"!==document.visibilityState){var n=function(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",n),e(!0))};document.addEventListener("visibilitychange",n,!1)}else e(!0)}));return A.then((function(){return v("adServer.requestAds",k),f.requestAds(t.global.config,w,k,d,A).then((function(e){return e.map((function(e){return e.then((function(e){return e&&l(e),e}))}))})).then((function(e){return Promise.all(e)}))}))}))}function l(n){var t=n.element,r=n.filled,i=n.sizeCode,s=n.sizeDims,u=t.parentElement,c=u.parentElement,d=(u.classList.contains("m-header-ad--slot"),c.closest("phoenix-balloon-header"));if(e.disableAdRendering)t.style.display="none";else if(u.classList.remove("is-placeholder"),r){for(var l,m=0,h=[c,u,d];m<h.length;m++)(l=h[m])&&(l.classList.add(a),l.classList.remove(o));t.setAttribute("data-ad-size",i);var v=c.getAttribute("data-class-rules");if(v)for(var g,p=JSON.parse(v),w=0;w<p.length;w+=1)if((g=p[w]).sizes&&-1!==g.sizes.indexOf(i)||g.sizes&&-1!==g.sizes.indexOf(s)||g.dimensions&&-1!==g.dimensions.indexOf(s))for(var b=0;b<g.classes.length;b+=1)c.classList.add(g.classes[b]);else for(var y=0;y<g.classes.length;y+=1)-1!==c.classList.contains(g.classes[y])&&c.classList.remove(g.classes[y]);f(n)}else{for(var P,S=0,k=[c,u,d];S<k.length;S++)(P=k[S])&&(P.classList.add(o,"not-filled"),P.classList.remove(a));f(n)}}function f(e){e.slotId&&(m(e.slotId),p[e.slotId]&&p[e.slotId].resolve(e))}function m(e){return g[e]||(g[e]=new Promise((function(n,t){p[e]={resolve:n,reject:t}})).then((function(n){return delete p[e],n}),(function(n){throw delete p[e],n}))),g[e]}var h=this;h.pageId=n,h.config=t;var v=e.debugLog,g={},p={};v("adServer.initPage");var w=e.adServerPromise.then((function(e){if(c())return e.initPage().then((function(){return v("adServer.initPage completed"),e}));throw new Error("Page not current")}));h.makeInitialAdCall=function(){var n;return e.adAuctionPromise.then((function(e){return n=e,e.getLatestResult()})).then((function(r){var i=[];return t.sizedSlots.forEach((function(n){e.resetAdSlot(n.id),n.model.deferLoad||i.push(n)})),t.outOfPageSlots&&t.outOfPageSlots.forEach((function(n){e.resetAdSlot(n.id),i.push(n)})),d(i,n,r)}))},h.makeOutOfPageAdCall=function(){var n;return e.adAuctionPromise.then((function(e){return n=e,e.getLatestResult()})).then((function(e){return d(t.outOfPageSlots||[],n,e)}))},h.makeDynamicAdCall=function(n,t){var r;return e.adAuctionPromise.then((function(e){return r=e,t.auctionId?e.getResultById(t.auctionId):e.getLatestResult()})).then((function(e){return d(t.slots,r,e)}))},h.getSlotResult=function(e){return m(e)},h.close=function(){v("close page",n),Object.keys(p).map((function(e){p[e].reject(new Error("cancelled by navigation"))}))};var b={},y={},P=!1,S=0}e.exports=function(e){e=e||{},this.adServerPromise=e.adServerPromise,this.breakpointPromise=e.breakpointPromise,this.clientPageModelPromise=e.clientPageModelPromise,this.document=e.document,this.adAuctionPromise=e.adAuctionPromise,this.timedOutPageLoadPromise=e.timedOutPageLoadPromise,this.disableAdRendering=e.disableAdRendering,this.forceAllSlotsEmpty=!!e.forceAllSlotsEmpty,this.debugLog=e.debugLog||function(){};var n=this.debugLog;n("new Session with options",e);var t=this;t.pageId=0,t.dynamicCallId=0;var i,o,a=new Promise((function(e){i=e}));t.beginPage=function(e){function a(n){return e.sizedSlots.some((function(e){return e.model.zone===n}))}var s=++t.pageId,u=r("advertising:beginPage:"+s);return o&&o.close(),t.hasAdhesionAndFixedBottomZone=a("adhesion")&&a("fixed_bottom"),n("begin page",s,e),o=new c(t,s,e,t.timedOutPageLoadPromise),1==s&&i(),n("page",s,"initial ad call"),o.makeInitialAdCall().then((function(e){return n("page",s,"initial ad call result:",e),u.end(),e}),(function(e){return n("page",s,"initial ad call failed:",e),u.end(),Promise.reject(e)}))},t.getPage=function(){return a.then((function(){return o}))},t.getAdCallConfig=function(e,n){return Promise.all([t.adServerPromise,a]).then((function(t){var r=t[0],i=o.config.global.config;return r.getAdCallConfig(e,n,i)}))},t.resetAdSlot=function(e){t.adServerPromise.then((function(n){n.resetAdSlot(e)}))},t.dynamicCall=function(e){var i=++t.dynamicCallId;n("dynamic call",i,e);var s=r("advertising:dynamicCall:"+i);return a.then((function(){return o.makeDynamicAdCall(i,e).then((function(e){return n("dynamic call",i,"result:",e),s.end(),e}))})).catch((function(e){return n("dynamic call",i,"failed:",e),s.end(),Promise.reject(e)}))},t.getSlotResult=function(e){if(!o)throw new Error("cannot call getSlotResult before a page is active");return o.getSlotResult(e)},t.reloadAd=function(e,n){return t.getSlotResult(e.id).then((function(){return t.resetAdSlot(e.id),t.dynamicCall({slots:[e],auctionId:n})})).catch((function(n){console.warn(n),t.dynamicCall({slots:[e]})}))}}},96463:(e,n,t)=>{var r=t(9736);e.exports=Promise.resolve({referrer:function(){var e;try{window.top.document.referrer&&(e=window.top.document.referrer)}catch(n){e=document.referrer}return e?r.parseHostName(e):void 0}()})},51718:(e,n,t)=>{var r=t(87796),i=t(77965),o=t(42392),a=t(24433)("adScripts:gamma");window.phxConfigQueue.push((function(){var e=window.document.location.hash&&-1!==window.document.location.hash.indexOf("phxAdvertisingDebug")?function(){var e=Array.prototype.slice.apply(arguments),n=window.performance&&window.performance.now?0|window.performance.now():Date.now();e.unshift("%c[phxAdvertisingDebug] "+n+"%c","font-weight:bold","font-weight:normal"),console.log.apply(console,e)}:void 0,n=this.features.isEnabled("use-mavenuid-demonitized"),a=this.features.isEnabled("disable-ad-rendering"),s=window.GdprStatus,u=this.user.hasPremium();s.isDemonetizedSafe().then((function(s){var c=!!n&&s;e&&(c||u)&&e(u?"ADS402 Premium":"ADS401 Demonetized"),r("phxAdvertisingQueue",new o({adServerPromise:i("phxAdServerQueue"),breakpointPromise:i("phxConfigQueue").then((function(e){return e.breakpoint.get()})),clientPageModelPromise:t(96463),debugLog:e,document:window.document,forceAllSlotsEmpty:u||c,adAuctionPromise:i("phxAdAuctionQueue"),timedOutPageLoadPromise:window.getTimedOutPageLoadPromise(3e4),disableAdRendering:a}))}))})),a.end()},41762:(e,n,t)=>{var r=t(9736);function i(e,n){switch(e.type){case"simple":return n[e.key]}}function o(){var e;try{window.top.document.referrer&&(e=window.top.document.referrer)}catch(n){e=document.referrer}return e?r.parseHostName(e):void 0}e.exports={evalTemplate:i,makePageTargeting:function(e,n,t,r){var o=t.beacons&&t.beacons.targetingParams&&t.beacons.targetingParams.exclude||{},a={};return Object.keys(e||{}).forEach((function(t){var s=i(e[t],n);"number"==typeof s&&(s+=""),null==s||""===s||Array.isArray(s)&&0===s.length||(r&&r.setTargeting(t,s),!o[t]&&(a[t]=s))})),a},vastCustomParams:function(e,n,t){var r=["ag","channel","cs","direct","et","feats","gd","in","lang","loggedin","pagetype","path","pod","pt","referrer","terms"];for(var i in n||(n={}),n)if(-1<r.indexOf(i)){var o=n[i];Array.isArray(o)&&(o=o.join(",")),e[i]=o}return t?encodeURIComponent(Object.keys(e).map((function(n){return[n,e[n]].join("=")})).join("&")):e},makePageModel:function(e,n,t,r){var i={};window.phxTrackedFeatures&&(i={trackedFeatures:Object.keys(window.phxTrackedFeatures).map((function(e){return e+":"+(window.phxTrackedFeatures[e]?"1":"0")})).join("|")});var a={};if(t){var s=window.GdprStatus;a={donottrack:!0,gdprIsApplicable:!0,gdprIsConsentGivenPromise:s.waitForConsentValue().then((function(){return s.isConsentGivenForPurposes(s.PURPOSE_IDS.advertising)})),kuid:void 0,optout:!0}}return Object.assign({},e,i,{referrer:o(),loggedIn:window.phxIsLoggedIn()?"1":"0"},a,r||{},n)}}},87796:e=>{e.exports=function(e,n){function t(e){n.then?n.then((function(t){n=t,e.call(n)})):e.call(n)}var r=window[e];if(window[e]={push:t},void 0!==r)for(var i=0;i<r.length;i++)t(r[i])}},77965:e=>{e.exports=function(e){var n,t=(n=e,window[n]=window[n]||[],window[n]);return new Promise((function(e){t.push((function(){e(this)}))}))}},63950:e=>{e.exports={breakpoints:{A:0,B:675,C:1240,D:1680},breakpointHeights:{D:1050}}},86483:e=>{var n,t=function(){};try{n=window}catch(e){n={}}e.exports=n.performance&&n.performance.mark?n.performance:{getEntriesByName:t,mark:t,measure:t}},24433:(e,n,t)=>{var r=t(86483),i=0;function o(){var e="phxMark:"+i++;return r.mark(e),e}e.exports=function(e){var n=o();return{end:function(){var t=o();r.measure(e,n,t);var i=r.getEntriesByName(e);if(i&&i.length)return i[i.length-1].duration}}}},9736:(e,n,t)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t,r=0;r<n.length;r++)(t=n[r]).enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}function a(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}var s=t(63950),u=s.breakpoints,c=s.breakpointHeights;function d(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.head;return new Promise((function(r,i){var o=document.createElement("script");n&&(o.id=n),o.onload=function(){r(o)},o.onerror=function(e){i(e)},o.type="text/javascript",o.src=e,t.appendChild(o)}))}var l={};function f(e,n,t){var r=n||e;return l[r]||(l[r]=d(e,n,t))}function m(){var e,n=window.innerWidth,t=window.innerHeight;for(var r in u)n>=u[r]&&(!c[r]||t>=c[r])&&(e=r);return e}var h,v,g,p=function(){function e(){i(this,e),this.observedBreakpoint=void 0,this.subscribers=[],this._observe()}return a(e,[{key:"_observe",value:function(){var e=this;this.observedBreakpoint=m(),window.addEventListener("resize",(function(){var n=m();n!==e.observedBreakpoint&&(e.observedBreakpoint=n,e.subscribers.forEach((function(e){e.onBreakpointChange(n)})))}))}},{key:"subscribe",value:function(e){if(!e.onBreakpointChange)throw new Error("onBreakpointChange method required");this.unsubscribe(e),this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){var n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}}]),e}();function w(){return"complete"===document.readyState||"interactive"===document.readyState}var b,y,P,S="190px 0px",k={},A=function(){function e(n,t){i(this,e),this.callback=n,this.timerId=null,this.restart(t)}return a(e,[{key:"restart",value:function(e){this.remaining=e,this.resume()}},{key:"resume",value:function(){this.start=new Date,clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}},{key:"pause",value:function(){clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"cancel",value:function(){clearTimeout(this.timerId),this.cancelled=!0}}]),e}();e.exports={addScriptResource:d,addScriptResourceOnce:f,debounce:function(e,n,t){function i(){return(new Date).getTime()}function o(){var t=n-(i()-f);if(0>=t||t>n){d&&window.clearTimeout(d);var r=v;d=h=v=void 0,r&&(w=i(),l=e.apply(m,u),!h&&!d&&(u=m=null))}else h=window.setTimeout(o,t)}function a(){h&&window.clearTimeout(h),d=h=v=void 0,(y||b!==n)&&(w=i(),l=e.apply(m,u),!h&&!d&&(u=m=null))}function s(){var t,r,s;return u=arguments,f=i(),m=this,v=y&&(h||!c),!1===b?t=c&&!h:(!d&&!c&&(w=f),(s=0>=(r=b-(f-w))||r>b)?(d&&(d=window.clearTimeout(d)),w=f,l=e.apply(m,u)):!d&&(d=window.setTimeout(a,r))),s&&h?h=window.clearTimeout(h):!h&&n!==b&&(h=window.setTimeout(o,n)),t&&(s=!0,l=e.apply(m,u)),!s||h||d||(u=m=null),l}var u,c,d,l,f,m,h,v,g,p,w=0,b=!1,y=!0;if(s.cancel=function(){h&&window.clearTimeout(h),d&&window.clearTimeout(d),d=h=v=void 0},"function"!=typeof e)throw new TypeError("this is not a function!");return n=0>n?0:+n||0,!0===t?(c=!0,y=!1):(p=r(g=t),!!g&&("object"===p||"function"===p)&&(c=t.leading,b="maxWait"in t&&Math.max(+t.maxWait||0,n),y="trailing"in t?t.trailing:y)),s},getCurrentBreakpoint:m,isExternalLink:function(e,n){if(!e)return!1;n||(n=function(){if(!y){var e=document.querySelector("link[rel='canonical']"),n=document.createElement("a");n.href=e.href,y=n.hostname}return y}());var t=e.match(/^https?:\/\/([^/]+)\/?/);return!!t&&t[1]!==n},isLiftIgniterSlice:function(e,n){return(0|e/100)%100<n},loadMetabetScriptOnce:function(e){f("".concat("https://go.metabet.io/js/global.js?siteID=").concat(e),"metabet-script").then((function(){-1===(document.head||document.getElementsByTagName("head")[0]).innerHTML.indexOf("metabet.io/css/main.css")&&"function"==typeof window.mb_DOMContentLoaded&&window.mb_DOMContentLoaded()}))},observeBreakpointChanges:function(e){return h||(h=new p),h.subscribe(e),h},observeFirstIntersection:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S,t=k[n]||(k[n]=new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting&&(n.unobserve(e.target),e.target.onFirstIntersection&&e.target.onFirstIntersection())}))}),{rootMargin:n}));return t.observe(e),t},observeVisibilityChanges:function(e){return b||(b=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&.5<=e.intersectionRatio?e.target.onChangeToVisible&&e.target.onChangeToVisible():e.target.onChangeToNotVisible&&e.target.onChangeToNotVisible()}))}),{threshold:.5})),b.observe(e),b},parseHostName:function(e){return e.replace(/^https?:\/\//,"").replace(/[:\/].*/,"").toLowerCase().replace(/^www\./,"").replace(/^m\./,"").replace(/\.blogspot(\.com?)?\.[a-z]{2,3}$/,".blogspot.com").replace(/^.*\.(gamepedia|wikia)(\.com?)?\.[a-z]{2,3}$/,"$1.com").split(".").slice(-3).join(".")},supportPassiveEventListeners:function(){if(void 0===P){P=!1;try{var e=Object.defineProperty({},"passive",{get:function(){P=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}}return P},throttle:function(e,n){var t,r,i,o,a=0,s=function(){a=new Date,i=null,o=e.apply(t,r)};return function(){var u=new Date,c=n-(u-a);return t=this,r=arguments,0>=c?(i&&clearTimeout(i),a=u,o=e.apply(t,r)):!i&&(i=setTimeout(s,c)),o}},Timer:A,userHasPremium:function(){return new Promise((function(e,n){window.phxConfigQueue||n("config object is necessary to check premium"),window.phxConfigQueue.push((function(){e(this.user.hasPremium())}))}))},waitForElement:function(e,n,t){if(!e)throw new Error("rootElement required");var r;return t&&t.untilDomReady&&(r=function(e){w()&&e()}),function(e,n,t,r){var i=e.querySelector(n);return i?Promise.resolve(i):new Promise((function(i,o){var a=new MutationObserver((function(){var t=e.querySelector(n);return t?(a.disconnect(),void i(t)):void(r&&r((function(){return a.disconnect(),void o(new Error("element not found"))})))}));a.observe(e,t)}))}(e,n,{childList:!0,subtree:!0},r)},whenDomContentLoaded:function(){return v||(v=w()?Promise.resolve():new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),v},whenPageLoaded:function(){return g||(g="complete"===document.readyState?Promise.resolve():new Promise((function(e){window.addEventListener("load",e)}))),g}}}},e=>{e(e.s=51718)}]);
//# sourceMappingURL=advertising.min.js.map